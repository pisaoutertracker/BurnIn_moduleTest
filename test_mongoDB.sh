#!/bin/bash

curl -X GET -H "Content-Type: application/json" "http://192.168.0.45:5005/modules"

curl -X GET -H "Content-Type: application/json" "http://192.168.0.45:5005/tests"

# Define the API endpoint URL and module ID
API_URL="http://192.168.0.45:5005/tests"

# Define the data to update as a JSON string
UPDATED_MODULE="{
"testID": "T20231107135334326041", 
"modules_list": ["654a1486b8b38796342687cd", 
"654a1486b8b38796342687c4", 
"654a1486b8b38796342688cd", 
"654a1486b8b3879634268c39", 
"654a1486b8b387963426876a", 
"654a1486b8b3879634268ab6", 
"654a1486b8b38796342688e7", 
"654a1486b8b3879634268bd9", 
"654a1486b8b387963426887c", 
"654a1486b8b3879634268917"], 
"testType": "Type3", 
"testDate": "2006-08-29", 
"testOperator": "Thomas Ward", 
"testStatus": "ongoing", 
"testResults": {"result": "pass"}}
"

UPDATED_TEST="{'runBoards': {0: 'fc7ot2'},
            'runSession': 'done',
 'runConfiguration': {'Nevents': '100',
                      'boards': {'0': {'ip': 'fc7ot2:50001',
                                       'opticalGroups': {'0': {'hybrids': {'0': {'pixels': [8,
                                                                                            9,
                                                                                            10,
                                                                                            11,
                                                                                            12,
                                                                                            13,
                                                                                            14,
                                                                                            15],
                                                                                 'strips': [0,
                                                                                            1,
                                                                                            2,
                                                                                            3,
                                                                                            4,
                                                                                            5,
                                                                                            6,
                                                                                            7]},
                                                                           '1': {'pixels': [8,
                                                                                            9,
                                                                                            10,
                                                                                            11,
                                                                                            12,
                                                                                            13,
                                                                                            14,
                                                                                            15],
                                                                                 'strips': [0,
                                                                                            1,
                                                                                            2,
                                                                                            3,
                                                                                            4,
                                                                                            5,
                                                                                            6,
                                                                                            7]}},
                                                               'lpGBT': 'lpGBT_v1.txt'}}}},
                      'commonSettings': 'pippo'},
 'runDate': '2023-12-18T17:29:35',
 'runFile': 'https://cernbox.cern.ch/files/link/public/zcvWnJKEk7YgSBh//T2023_12_18_17_29_35_551291/output_iopye.zip',
 'runModules': {'fc7ot2_optical0': ('PS_26_10-IPG_00103', 749637543)},
 'runNoise': {749637543: {'H0_MPA10': 2.6705735978359977,
                          'H0_MPA11': 2.6935806630179284,
                          'H0_MPA12': 2.6292036875461537,
                          'H0_MPA13': 2.642724081253012,
                          'H0_MPA14': 2.658317151789864,
                          'H0_MPA15': 2.7361066301042833,
                          'H0_MPA8': 2.6910996486743293,
                          'H0_MPA9': 2.6728573732078074,
                          'H0_SSA0': 3.815545439720154,
                          'H0_SSA1': 3.6896544694900513,
                          'H0_SSA2': 3.910179368654887,
                          'H0_SSA3': 3.686890494823456,
                          'H0_SSA4': 3.848228140672048,
                          'H0_SSA5': 3.7831893861293793,
                          'H0_SSA6': 3.9192641377449036,
                          'H0_SSA7': 3.881905251741409,
                          'H1_MPA10': 2.708948712795973,
                          'H1_MPA11': 2.7771326607869318,
                          'H1_MPA12': 2.791044878338774,
                          'H1_MPA13': 2.8249405045683185,
                          'H1_MPA14': 2.933508700194458,
                          'H1_MPA15': 2.824923916393891,
                          'H1_MPA8': 2.704644412174821,
                          'H1_MPA9': 2.776509021160503,
                          'H1_SSA0': 3.6102613747119903,
                          'H1_SSA1': 3.7323945502440137,
                          'H1_SSA2': 3.5717551708221436,
                          'H1_SSA3': 3.6839568595091503,
                          'H1_SSA4': 3.8354129513104755,
                          'H1_SSA5': 4.027821805079778,
                          'H1_SSA6': 4.198176461458206,
                          'H1_SSA7': 4.625942313671112}},
 'runStatus': 'done',
 'runType': 'Type1'}
"


# Send a PUT request using curl
curl -X POST -H "Content-Type: application/json" -d "$UPDATED_TEST" "$API_URL"
#curl -X POST -H "Content-Type: application/json" -d "$UPDATED_MODULE" "$API_URL"
